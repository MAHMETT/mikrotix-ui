<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta
            name="description"
            content="Login successful - you have been authenticated and will be redirected to your dashboard."
        />
        <meta name="robots" content="noindex, nofollow" />
        <title>Login Successful - MIKROTIKUI</title>
        <link rel="canonical" href="https://yourdomain.com/login/success" />

        <!-- Preload critical resources -->
        <link
            rel="preload"
            href="assets/images/background2.webp"
            as="image"
            type="image/webp"
        />
        <link
            rel="preload"
            href="assets/images/MIKROTIKUI-LOGO.webp"
            as="image"
            type="image/webp"
        />

        <!-- Tailwind CSS -->
        <link rel="stylesheet" href="src/css/global.css" />
    </head>

    <body class="bg-main font-sans antialiased">
        <main
            id="main-content"
            class="min-h-screen flex items-center justify-center p-4 relative"
            role="main"
        >
            <div class="w-full max-w-md">
                <!-- Success Card -->
                <div
                    class="liquid-glass-primary rounded-3xl p-8 shadow-2xl interactive-element interactive-hover interactive-touch"
                >
                    <!-- Header with Logo -->
                    <header class="flex items-center mb-8 fade-in-up">
                        <div
                            class="liquid-glass-tertiary rounded-2xl p-3 mr-4 interactive-element"
                        >
                            <img
                                src="assets/images/MIKROTIKUI-LOGO.webp"
                                alt="MIKROTIKUI LOGO"
                                width="40"
                                height="40"
                                loading="eager"
                                class="w-10 h-10 object-contain"
                                onerror="this.onerror=null; this.src='assets/images/Logo.png';"
                            />
                        </div>
                        <div>
                            <h1 class="text-2xl font-bold text-white mb-1">
                                MIKROTIKUI
                            </h1>
                            <p class="text-sm text-white text-opacity-80">
                                Authentication successful
                            </p>
                        </div>
                    </header>

                    <!-- Success Animation -->
                    <div class="text-center mb-8">
                        <!-- Animated Success Icon -->
                        <div
                            class="success-icon liquid-glass-success success-pulse"
                        >
                            <svg
                                class="w-16 h-16 success-circle"
                                viewBox="0 0 100 100"
                                fill="none"
                                xmlns="http://www.w3.org/2000/svg"
                            >
                                <!-- Background Circle -->
                                <circle
                                    cx="50"
                                    cy="50"
                                    r="45"
                                    fill="rgba(34, 197, 94, 0.2)"
                                    stroke="rgba(34, 197, 94, 0.3)"
                                    stroke-width="2"
                                />
                                <!-- Success Checkmark -->
                                <path
                                    class="checkmark"
                                    d="M25 50L40 65L75 35"
                                />
                            </svg>
                        </div>

                        <!-- Success Message -->
                        <div class="fade-in-up-delay-1">
                            <h2 class="text-3xl font-bold text-white mb-2">
                                Welcome Back!
                            </h2>
                            <p class="text-lg text-white text-opacity-90 mb-4">
                                You have successfully logged in
                            </p>
                        </div>
                        <div
                            class="liquid-glass-secondary rounded-xl p-4 mb-6 fade-in-up-delay-2"
                        >
                            <div
                                class="flex items-center justify-center space-x-3"
                            >
                                <div
                                    class="w-12 h-12 liquid-glass-tertiary rounded-full flex items-center justify-center"
                                >
                                    <svg
                                        class="w-6 h-6 text-white"
                                        fill="currentColor"
                                        viewBox="0 0 24 24"
                                    >
                                        <path
                                            d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"
                                        />
                                    </svg>
                                </div>
                                <div class="text-left">
                                    <p
                                        class="text-white font-semibold"
                                        id="username"
                                    >
                                        $(username)
                                    </p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Redirect Progress -->
                <div class="mb-8 fade-in-up-delay-3">
                    <div class="flex items-center justify-between mb-2">
                        <span class="text-sm text-white text-opacity-80">
                            Redirecting...
                        </span>
                        <span
                            class="text-sm text-white text-opacity-80"
                            id="countdown"
                        >
                            3s
                        </span>
                    </div>
                    <div class="progress-bar">
                        <div class="progress-fill"></div>
                    </div>
                </div>

                <!-- Action Buttons -->
                <div class="space-y-4 fade-in-up-delay-3">
                    <!-- Continue Button -->
                    <button
                        onclick="redirectToDashboard()"
                        class="w-full liquid-glass-success text-white font-semibold py-4 px-6 rounded-xl interactive-element button-hover button-touch focus-ring"
                        id="continueBtn"
                    >
                        <span class="flex items-center justify-center">
                            <svg
                                class="w-5 h-5 mr-2"
                                fill="none"
                                stroke="currentColor"
                                viewBox="0 0 24 24"
                            >
                                <path
                                    stroke-linecap="round"
                                    stroke-linejoin="round"
                                    stroke-width="2"
                                    d="M13 7l5 5-5 5M6 12h12"
                                />
                            </svg>
                            Continue
                        </span>
                    </button>

                    <!-- Footer -->
                    <footer class="mt-8 text-center fade-in-up-delay-3">
                        <p class="text-xs text-white text-opacity-60">
                            Logged in at
                            <span id="loginTime"></span>
                        </p>
                    </footer>
                </div>
            </div>
        </main>

        <script>
            /**
             * Login Success Page with Enhanced UX
             * Handles auto-redirect and user interactions
             */
            (function () {
                'use strict';

                // Configuration
                const CONFIG = {
                    REDIRECT_DELAY: 5000, // 5 seconds
                    COUNTDOWN_INTERVAL: 1000, // 1 second
                    DASHBOARD_URL: '$(link-redirect)',
                };

                // State management
                let redirectTimer = null;
                let countdownTimer = null;
                let timeRemaining = 5;

                // DOM elements
                const elements = {
                    countdown: document.getElementById('countdown'),
                    username: document.getElementById('username'),
                    loginTime: document.getElementById('loginTime'),
                    continueBtn: document.getElementById('continueBtn'),
                };

                /**
                 * Initialize the success page
                 */
                function init() {
                    displayUserInfo();
                    displayLoginTime();
                    startCountdown();
                    setupAutoRedirect();
                    setupAccessibility();

                    // Focus management for accessibility
                    elements.continueBtn.focus();
                }

                /**
                 * Display user information from URL params or localStorage
                 */
                function displayUserInfo() {
                    // Try to get user info from URL parameters
                    const urlParams = new URLSearchParams(
                        window.location.search,
                    );
                    const username =
                        urlParams.get('user') ||
                        localStorage.getItem('username') ||
                        'MIKROTIKUI';

                    elements.username.textContent = username;

                    // Announce to screen readers
                    const announcement = `Welcome back, ${username}. Login successful.`;
                    announceToScreenReader(announcement);
                }

                /**
                 * Display current login time
                 */
                function displayLoginTime() {
                    const now = new Date();
                    const timeString = now.toLocaleTimeString([], {
                        hour: '2-digit',
                        minute: '2-digit',
                        hour12: true,
                    });
                    elements.loginTime.textContent = timeString;
                }

                /**
                 * Start the countdown timer
                 */
                function startCountdown() {
                    updateCountdownDisplay();

                    countdownTimer = setInterval(() => {
                        timeRemaining--;
                        updateCountdownDisplay();

                        if (timeRemaining <= 0) {
                            clearInterval(countdownTimer);
                            elements.countdown.textContent = 'Redirecting...';
                        }
                    }, CONFIG.COUNTDOWN_INTERVAL);
                }

                /**
                 * Update countdown display
                 */
                function updateCountdownDisplay() {
                    if (elements.countdown && timeRemaining > 0) {
                        elements.countdown.textContent = `${timeRemaining}s`;
                    }
                }

                /**
                 * Setup auto-redirect timer
                 */
                function setupAutoRedirect() {
                    redirectTimer = setTimeout(() => {
                        redirectToDashboard();
                    }, CONFIG.REDIRECT_DELAY);
                }

                /**
                 * Setup accessibility features
                 */
                function setupAccessibility() {
                    // Announce page load to screen readers
                    setTimeout(() => {
                        announceToScreenReader(
                            'Login successful. You will be redirected to dashboard in 5 seconds.',
                        );
                    }, 1000);

                    // Handle keyboard navigation
                    document.addEventListener('keydown', handleKeyPress);
                }

                /**
                 * Handle keyboard interactions
                 */
                function handleKeyPress(e) {
                    switch (e.key) {
                        case 'Enter':
                        case ' ': // Spacebar
                            if (e.target === elements.continueBtn) {
                                redirectToDashboard();
                            }
                            break;
                        case 'Escape':
                            cancelAutoRedirect();
                            announceToScreenReader('Auto-redirect canceled.');
                            break;
                    }
                }

                /**
                 * Cancel auto-redirect
                 */
                function cancelAutoRedirect() {
                    if (redirectTimer) {
                        clearTimeout(redirectTimer);
                        redirectTimer = null;
                    }
                    if (countdownTimer) {
                        clearInterval(countdownTimer);
                        countdownTimer = null;
                    }
                    elements.countdown.textContent = 'Canceled';
                }

                /**
                 * Announce message to screen readers
                 */
                function announceToScreenReader(message) {
                    const announcement = document.createElement('div');
                    announcement.setAttribute('aria-live', 'polite');
                    announcement.setAttribute('aria-atomic', 'true');
                    announcement.className = 'sr-only';
                    announcement.textContent = message;

                    document.body.appendChild(announcement);

                    // Remove after announcement
                    setTimeout(() => {
                        if (announcement.parentNode) {
                            announcement.parentNode.removeChild(announcement);
                        }
                    }, 1000);
                }

                /**
                 * Show loading state for navigation
                 */
                function showLoadingState(button, text = 'Loading...') {
                    const originalContent = button.innerHTML;
                    button.disabled = true;
                    button.innerHTML = `
                    <span class="flex items-center justify-center">
                        <svg class="animate-spin w-5 h-5 mr-2" fill="none" viewBox="0 0 24 24">
                            <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                            <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
                        </svg>
                        ${text}
                    </span>
                `;

                    // Restore if navigation fails
                    setTimeout(() => {
                        if (button.disabled) {
                            button.disabled = false;
                            button.innerHTML = originalContent;
                        }
                    }, 5000);
                }

                /**
                 * Navigation functions - Global scope for onclick handlers
                 */
                window.redirectToDashboard = function () {
                    cancelAutoRedirect();
                    showLoadingState(
                        elements.continueBtn,
                        'Loading Dashboard...',
                    );
                    announceToScreenReader('Redirecting to dashboard.');

                    setTimeout(() => {
                        window.location.href = CONFIG.DASHBOARD_URL;
                    }, 500);
                };

                // Clean up on page unload
                window.addEventListener('beforeunload', () => {
                    cancelAutoRedirect();
                });

                // Initialize when DOM is ready
                if (document.readyState === 'loading') {
                    document.addEventListener('DOMContentLoaded', init);
                } else {
                    init();
                }
            })();
        </script>
    </body>
</html>
